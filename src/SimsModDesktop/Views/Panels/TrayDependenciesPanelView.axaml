<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:SimsModDesktop.ViewModels"
             x:Class="SimsModDesktop.Views.Panels.TrayDependenciesPanelView"
             x:DataType="vm:MainWindowViewModel">
    <Border Classes="card-muted" Padding="10" IsVisible="{Binding IsTrayDependenciesVisible}">
        <StackPanel Spacing="10">
            <TextBlock Classes="section-title" Text="Tray Dependency Analysis" />
            <Grid ColumnDefinitions="180,*"
                  RowDefinitions="Auto"
                  RowSpacing="8"
                  ColumnSpacing="8">
                <TextBlock Grid.ColumnSpan="2"
                           Classes="helper-text"
                           Text="Tray Path and Mods Path are sourced from Settings." />
            </Grid>

            <Border Classes="card" Padding="10" Margin="0,8,0,0" IsVisible="{Binding IsToolkitAdvancedOpen}">
                <Grid ColumnDefinitions="180,*,180,*"
                      RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto"
                      RowSpacing="8"
                      ColumnSpacing="8">
                    <TextBlock Grid.Row="0" VerticalAlignment="Center" Text="Tray Item Key" />
                    <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding TrayDependencies.TrayItemKey}" />

                    <TextBlock Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Text="TopN" />
                    <TextBox Grid.Row="0" Grid.Column="3" Text="{Binding TrayDependencies.TopNText}" />

                    <TextBlock Grid.Row="1" VerticalAlignment="Center" Text="Minimum Match Count" />
                    <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding TrayDependencies.MinMatchCountText}" />

                    <TextBlock Grid.Row="1" Grid.Column="2" VerticalAlignment="Center" Text="Max Package Count" />
                    <TextBox Grid.Row="1" Grid.Column="3" Text="{Binding TrayDependencies.MaxPackageCountText}" />

                    <TextBlock Grid.Row="2" VerticalAlignment="Center" Text="Export Confidence" />
                    <ComboBox Grid.Row="2"
                              Grid.Column="1"
                              ItemsSource="{Binding TrayDependencies.AvailableExportMinConfidence}"
                              SelectedItem="{Binding TrayDependencies.ExportMinConfidence}" />

                    <CheckBox Grid.Row="2" Grid.Column="3" Content="Export matched packages" IsChecked="{Binding TrayDependencies.ExportMatchedPackages}" />

                    <CheckBox Grid.Row="3" Grid.Column="1" Content="Export unused packages" IsChecked="{Binding TrayDependencies.ExportUnusedPackages}" />

                    <TextBlock Grid.Row="4" VerticalAlignment="Center" Text="Output CSV" />
                    <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding TrayDependencies.OutputCsv}" />

                    <TextBlock Grid.Row="4" Grid.Column="2" VerticalAlignment="Center" Text="Unused CSV" />
                    <TextBox Grid.Row="4" Grid.Column="3" Text="{Binding TrayDependencies.UnusedOutputCsv}" />

                    <TextBlock Grid.Row="5" VerticalAlignment="Center" Text="Export Directory" />
                    <TextBox Grid.Row="5" Grid.Column="1" Classes="path-field" Text="{Binding TrayDependencies.ExportTargetPath}" />
                    <Button Grid.Row="5" Grid.Column="2" Content="Browse" Command="{Binding BrowseFolderCommand}" CommandParameter="ProbeExportTargetPath" />
                </Grid>
            </Border>
        </StackPanel>
    </Border>
</UserControl>


